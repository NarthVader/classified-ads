package com.pinnsights

import org.openqa.selenium.By
import org.openqa.selenium.chrome.ChromeDriver
import java.time.LocalDate
import java.time.LocalDateTime
import java.time.format.DateTimeFormatter

fun adNowLAKitten(driver: ChromeDriver) {

    Thread.sleep(1000)
    val ads: IntArray = intArrayOf(598429223,598429211,598429200,598429170,598429162,598429157,598429138,598429127,598429117,598429066,
        598429058,598429011,598428974,598428936,598428929,598428916,598428836,598428819,598428800,598428754,
        598425955,593387919)

    //println("Ads Now: " + ads.size)
    executeAds(driver,ads)
}

fun adNowSEAKitten(driver: ChromeDriver) {

    Thread.sleep(1000)
    val ads: IntArray = intArrayOf(621316806,621311027,621310914,621310711,621310691,607569792)

    //println("Ads Now: " + ads.size)
    executeAds(driver,ads)
}

fun adNowDALKitten(driver: ChromeDriver) {

    Thread.sleep(1000)
    val ads: IntArray = intArrayOf(621321273,621321257,621321246,621321234,621321224,621321211,621321195,621321184,621321175,621321163,
        621321154,621321140,621321128,621321110,621321096,621321089,621321076,621321041,621320517,621320491,
        621320474,621320443,607605382)

    //println("Ads Now: " + ads.size)
    executeAds(driver,ads)
}

fun adNowSANKitten(driver: ChromeDriver) {

    Thread.sleep(1000)
    val ads: IntArray = intArrayOf(621320283,621320151,621320044,621319946,621319823,621319755,621319705,621319653,621319636,621319629,
        621319608,621319585,621319546,621319503,621319486,621319454,621319430,621319377,621319337,621319307,
        621319266,621319241,607701186)

    //println("Ads Now: " + ads.size)
    executeAds(driver,ads)
}

fun adNowPhoenixKitten(driver: ChromeDriver) {

    Thread.sleep(1000)
    val ads: IntArray = intArrayOf(614338358,614338269,614338224,614338194,614338150,614338138,614338037,614338008,614337990,614337949,
        614337923,614337909,614337865,614337751,614337706,614337509,614337466,614337452,614337384,614337301,
        614337258,614337193,607689961)

    //println("Ads Now: " + ads.size)
    executeAds(driver,ads)
}

fun adNowPhiladelphiaKitten(driver: ChromeDriver) {

    Thread.sleep(1000)
    val ads: IntArray = intArrayOf(618449808,618449801,618449371,618449332,618449307,618449287,618449276,618435442,618433601,618432152,
        618403880,618382653,618380685,618362889,618361388,618359470,618357307,618355582,618353449,618351510,
        618119201,607676779)

    //println("Ads Now: " + ads.size)
    executeAds(driver,ads)
}

fun adNowNewYorkKitten(driver: ChromeDriver) {

    Thread.sleep(1000)
    val ads: IntArray = intArrayOf(619251356,619247710,619244931,619241868,619239973,619235992,619233768,619230363,619227326,619225680,
        619222520,619220182,619218395,619216394,619213889,619211847,619209672,619206284,619203882,619201856,
        619200186,619198561,618450081,607661198)

    //println("Ads Now: " + ads.size)
    executeAds(driver,ads)
}

fun adNowMiamiKitten(driver: ChromeDriver) {

    Thread.sleep(1000)
    val ads: IntArray = intArrayOf(619301367,619299213,619296168,619294426,619292350,619290342,619288603,619286699,619284271,619282306,
        619279865,619278033,619275979,619273823,619271664,619269664,619267527,619265289,619263220,619260908,
        619258431,619256242,607647017)

    //println("Ads Now: " + ads.size)
    executeAds(driver,ads)
}

fun adNowHoustonKitten(driver: ChromeDriver) {

    Thread.sleep(1000)
    val ads: IntArray = intArrayOf(619402687,619400782,619398856,619397090,619395434,619393153,619391352,619389341,619387664,619385443,
        619383481,619381356,619379255,619377280,619375258,619373392,619371334,619369475,619367320,619365300,
        619363480,619360872,607621301)

    //println("Ads Now: " + ads.size)
    executeAds(driver,ads)
}

fun adNowChicagoKitten(driver: ChromeDriver) {

    Thread.sleep(1000)
    val ads: IntArray = intArrayOf(618114982,618104405,618102553,618097355,618087446,618061391,618059091,618056750,618039495,618036256,
        618021505,618019392,618016538,618014438,617999730,617980006,617967761,617963216,617939266,617935778,
        617932683,607590152)

    //println("Ads Now: " + ads.size)
    executeAds(driver,ads)
}


fun adNowChicago(driver: ChromeDriver) {

    Thread.sleep(1000)
    val ads: IntArray = intArrayOf(397197125,397197113,397197102,397197092,397197053,397197032,397196974,397196827,397196756,397195310,
        397194603,397193879,397193105,397186141,397183052,397182155,397178276,397176702,397172981,397172774,
        397171976,397171800,397171733,397171451,397170645,397170535,397170495,397170418,397170376,397170347,
        397170260,397170235,397166957,397166944,397166903,397166880,397166870,397166795,397166704,397166666,
        397166594,397166425,397166391,397166330,397166106,397166020,397165937,397165902,397165880,397165854,
        397165833,397165795,397165729,397165343,397165083,397164240,397093540,397093362,397093211,397092452,
        397090880,397085122,397083070,397082402,397076910,397076856,397076738,397076672,397076650,397076567,
        397008070,397008065,397008015,397007824,397006559,397006447,397005567,397004780,397004073,397002664,
        397002127,397001944,397000537,397000107,396814544,396814536,396814507,396814476,396814371,396814315,
        396814111,396814067,396813857,396813614,396813226,396812965,396812476,396810382,396809461,396807445,
        396376880,396375897,396375595,396372032,396371956,396368091,396367728,396367414,396367069,396366810,
        396366620,396366259,396365187,396365096,396365027,396364816,396364743,396364657,396364417,396364246,
        396347633,396347270,396347097,396344011,396343761,396342737,396339571,396339228,396338887,396335656,
        396335629,396219446,396217715,396215856,396214620,396211257,396210332,396208563,396205687,396205229,
        396204875,396202659,396202193,396200710,396199217,396197610,396197019,396195566,396193584,396190408,
        396187912,396187766,396187615,396181326,396170373,396169149,396168125,396165459,396164494,396150600,
        396150454,395817366)

    //println("Ads Now: " + ads.size)
    executeAds(driver,ads)
}

fun executeAds(driver: ChromeDriver,ads:IntArray) {

    //println(adEnd)
    for (i in 0..ads.size-1) {
        val index = ads[i]
        //println("$i: " + index)
        driver.get("https://www.classifiedads.com/post.php?$index")
        Thread.sleep(1000)

        renewAds(driver,index)

        Thread.sleep(1000)

        driver.findElement(By.xpath("//a[@class='flat']")).click()
        Thread.sleep(1000)
    }
    driver.get("https://www.classifiedads.com/account.php?notice=loggedin")
    Thread.sleep(1000)
    driver.findElement(By.xpath("//a[@href='/logout.php']")).click()
    Thread.sleep(1000)
}

fun renewAds(driver: ChromeDriver, index: Int) {
    val dateString = driver.findElement(By.name("time_expires")).getAttribute("value").toString()
    val parsedDate = LocalDate.parse(dateString, DateTimeFormatter.ofPattern("MMM d, yyyy"))
    val today = LocalDate.now()

    if(parsedDate<today) {
        Thread.sleep(1000)
        driver.get("https://www.classifiedads.com/account.php?itemskip=0&aid=$index&renew=1")
        Thread.sleep(1000)
        driver.get("https://www.classifiedads.com/post.php?$index")
    }
}